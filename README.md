# Prism

Using my apps is also a way to [support me](https://5km.tech):

<p align="center">
  <a href="https://zipic.app"><img src="https://5km.tech/products/zipic/icon.png" width="60" height="60" alt="Zipic" style="border-radius: 12px; margin: 4px;"></a>
  <a href="https://orchard.5km.tech"><img src="https://5km.tech/products/orchard/icon.png" width="60" height="60" alt="Orchard" style="border-radius: 12px; margin: 4px;"></a>
  <a href="https://apps.apple.com/cn/app/timego-clock/id6448658165?l=en-GB&mt=12"><img src="https://5km.tech/products/timego/icon.png" width="60" height="60" alt="TimeGo Clock" style="border-radius: 12px; margin: 4px;"></a>
  <a href="https://keygengo.5km.tech"><img src="https://5km.tech/products/keygengo/icon.png" width="60" height="60" alt="KeygenGo" style="border-radius: 12px; margin: 4px;"></a>
  <a href="https://hipixel.5km.tech"><img src="https://hipixel.5km.tech/_next/image?url=%2Fappicon.png&w=256&q=75" width="60" height="60" alt="HiPixel" style="border-radius: 12px; margin: 4px;"></a>
</p>

---

<p align="right">
  <span>English</span> | <a href="README.zh-Hans.md">ç®€ä½“ä¸­æ–‡</a>
</p>

<p align="center">
  <a href="#-license">
    <img src="https://img.shields.io/badge/License-AGPL%20v3-blue.svg" alt="License: AGPL v3" style="border-radius: 8px;">
  </a>
  <a href="https://developer.apple.com/swift">
    <img src="https://img.shields.io/badge/Swift-6.2-orange.svg" alt="Swift 6.2" style="border-radius: 8px;">
  </a>
  <a href="https://developer.apple.com/macos">
    <img src="https://img.shields.io/badge/Platform-macOS-lightgrey.svg" alt="Platform: macOS" style="border-radius: 8px;">
  </a>
  <a href="https://developer.apple.com/macos">
    <img src="https://img.shields.io/badge/macOS-14.0%2B-brightgreen.svg" alt="macOS 14.0+" style="border-radius: 8px;">
  </a>
</p>

Prism is a SwiftUI menu bar companion that organizes Claude-compatible API services, whether they come from direct model providers or third-party Anthropic-compatible gateways. The project was created as an experiment to validate large language models' ability to ship real macOS utilities; most of the code was generated by AI agents, with minimal human assembly and polish. The prototype turned out to be genuinely useful, so we decided to open source itâ€”please enjoy it, and respect the license that makes this release possible.

### âœ¨ Features

- ğŸ§± Manage multiple AI provider profiles with typed environment variables and per-provider icons
- ğŸ” One-click activation that writes to `.claude/settings.json` while preserving user-managed keys and keeping backups
- ğŸ§  Pre-built templates for popular Claude-compatible services (Zhipu AI, Moonshot, DeepSeek, MiniMax, etc.) plus a custom profile for anything else
- ğŸ›¡ï¸ Automatic config backups and token masking so risky fields stay guarded in logs
- ğŸ”” Sparkle-powered update checks right from the menu bar
- ğŸ¯ Minimal, keyboard-friendly UI sized for quick status bar interactions

### ğŸ§­ Architecture at a Glance

- `Prism/App/` â€” status bar entry point, popover lifecycle, Sparkle updater bootstrap
- `ViewModels/` â€” `@Observable` models powering provider selection, updates, and UI state transitions
- `Views/` and `Views/Components/` â€” SwiftUI surfaces for provider management, animated transitions, and confirmation popovers
- `Services/` â€” configuration access, import/sync helpers, and provider persistence
- `Models/` â€” shared types for environment values, provider templates, and token deduplication rules
- `Extensions/` â€” lightweight styling helpers and gradient button styles used across the UI

### ğŸš€ Getting Started

1. Clone the repository and switch into the project folder.
2. Open `Prism.xcodeproj` in Xcode 16 (Swift 6 toolchain) or newer.
3. Select the `Prism` scheme and build the app (`Command + B`), or run tests with:

   ```bash
   xcodebuild -scheme Prism -configuration Debug test -destination 'platform=macOS'
   ```

4. Ensure the app can read and write `~/.claude/settings.json` (Prism runs unsandboxed, so the file must exist and be writable for your macOS user).

### ğŸ” Configuration Tips

- Prism writes directly to `.claude/settings.json`; avoid editing the file simultaneously in other tools to prevent conflicting changes.
- Prism stores a backup before every write; the `settings.json.backup` file lives alongside the primary config so you can recover quickly.
- Sensitive fields such as `ANTHROPIC_AUTH_TOKEN` are masked in debug logs; please treat API keys as secrets when filing issues or sharing screenshots.

### ğŸ¤– AI-First Creation

Prism was scoped, scaffolded, and iterated primarily by autonomous AI developers. Humans reviewed architecture, validated file-system access paths, and polished the interface, but the bulk of the Swift you see emerged from model-driven workflows. Opening the codebase lets others evaluate, stress-test, and extend this AI-built foundationâ€”feedback on model quirks or edge cases is especially valuable.

### ğŸŒ± Why Open Source?

Prism was built to benchmark models like GLM 4.6 in real coding scenarios. Friends kept asking for the tool, so it made sense to publish the source. Please respect the license and share back improvements.


### ğŸ¤ Contributing

Issues and pull requests are welcomeâ€”whether you spot AI-generated oddities, want to add new provider templates, or can expand test coverage for configuration edge cases. Please keep contributions in English, observe the existing folder structure, and run `xcodebuild ... test` before submitting. By participating you agree to respect the AGPLv3 license.

### ğŸªª License

Prism is released under the GNU Affero General Public License v3.0. You may use, modify, and redistribute it as long as derivative works remain under the same license and you provide complete source code access. Please keep the license notice intact and thank you for honoring the agreement that keeps Prism open.
